<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lib_UART_Extension_Pack: Lib_UART_Extension_Pack</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Lib_UART_Extension_Pack<span id="projectnumber">&#160;1</span>
   </div>
   <div id="projectbrief">Library to use different microcontrollers for interactions with the ExtPack.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('index.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Lib_UART_Extension_Pack </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__r_e_a_d_m_e"></a></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md31"></a>
Building</h1>
<p>The Makefile is tested on macOS Sequoia (15.5). <br  />
 It builds the static library <span class="tt">libExtPack.a</span> in the <span class="tt">build/</span> folder. <br  />
 To build it the Makefile has to be called in a specific way: <br  />
 <span class="tt">make MCU_AVR_GCC=atxxxxYYY F_CPU=YYYYYYYUL [DEFINES="[USED_UNITS=Y] [SEND_BUF_LEN=Y]"] [V=1]</span> <br  />
 Where x stands for a string, Y for a number and [...] means optional. The numbers (Y) and strings (x) can have another width than the pattern. The V flags stands for verbose and if set it will show all commands. <br  />
 The Makefile uses <span class="tt">lto</span> to build the library. It is therefore recommended to use the flag also to link the library. <br  />
 <b>Note</b>: Make sure the library is built with the correct parameters named above matching your specific project. <b>Note</b>: If you are using a not unix based system you have to edit the <span class="tt">MKDIR_P ?=</span> and <span class="tt">RM_RF ?=</span>to something working on your system.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md32"></a>
Examples</h1>
<p>The examples can be found in the <span class="tt">examples</span> folder. The naming is based on: <span class="tt">&lt;ShortDescription&gt;_Example__&lt;UsedUnit1&gt;_&lt;UsedUnit2&gt;_&lt;...&gt;_&lt;UsedUnitN&gt;.c</span></p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md33"></a>
Build examples</h2>
<p>To build the examples you can use the <span class="tt">examples</span> target of the makefile: <br  />
 <span class="tt">make examples MCU_AVR_GCC=atxxxxYYY F_CPU=YYYYYYYUL [DEFINES="[USED_UNITS=Y] [SEND_BUF_LEN=Y]"] [V=1]</span> <br  />
 This creates a hex file for every example in the <span class="tt">build/examples</span> folder. This hex file can be flashed on the controller via for example avrdude.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md34"></a>
Communication</h2>
<p>The microcontroller communicates with the Extension_Pack with 8N1 and 1 MBaud UART.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md35"></a>
Structure</h2>
<p>The project is divided in 4 layers:</p><ul>
<li>HAL (ExtPack/HAL)</li>
<li>Core (ExtPack/Core)</li>
<li>Util (ExtPack/Util)</li>
<li>Service (ExtPack/Service)</li>
</ul>
<p>Every layer adds abstraction to the functionality. The HAL layer handles the communication on hardware layer. The Core layer is a general interface between hardware layer and units. The Util layer adds the basic operations of the units. The Service layer adds more complex operations of the units based on combining basic operations. Therefore, the service layer can be cut off to be able to run the framework on smaller microcontrollers with less flash.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Unit  </th><th class="markdownTableHeadCenter">Util layer  </th><th class="markdownTableHeadCenter">Service layer  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">ExtPack  </td><td class="markdownTableBodyCenter">✅  </td><td class="markdownTableBodyCenter">✅  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">Reset  </td><td class="markdownTableBodyCenter">✅  </td><td class="markdownTableBodyCenter">❌  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">Error  </td><td class="markdownTableBodyCenter">✅  </td><td class="markdownTableBodyCenter">❌  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">ACK  </td><td class="markdownTableBodyCenter">✅  </td><td class="markdownTableBodyCenter">✅  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">GPIO  </td><td class="markdownTableBodyCenter">✅  </td><td class="markdownTableBodyCenter">❌  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">UART  </td><td class="markdownTableBodyCenter">✅  </td><td class="markdownTableBodyCenter">✅  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">Timer  </td><td class="markdownTableBodyCenter">✅  </td><td class="markdownTableBodyCenter">✅  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">SPI  </td><td class="markdownTableBodyCenter">✅  </td><td class="markdownTableBodyCenter">✅  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">I2C  </td><td class="markdownTableBodyCenter">✅  </td><td class="markdownTableBodyCenter">✅  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">SRAM  </td><td class="markdownTableBodyCenter">✅  </td><td class="markdownTableBodyCenter">✅  </td></tr>
</table>
<h2 class="doxsection"><a class="anchor" id="autotoc_md36"></a>
Functionality</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md37"></a>
Units</h3>
<p>This library supports Reset_Unit, Error_Unit, ACK_Unit, UART_Unit, GPIO_Uni, Timer_Unit, SPI_Unit, I2C_Unit and SRAM_Unit on the ExtPack. <br  />
</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md38"></a>
Events</h3>
<p>All units have events which are set if the unit received something.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md39"></a>
custom_ISR callbacks</h3>
<p>custom ISRs for all units can be implemented. They act like interrupted from the unit itself. Interrupts are not enabled before calling the callback custom ISR.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md40"></a>
Usage</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md41"></a>
Initialisation</h3>
<p>1) Initialize ExtPack with <b>init_ExtPack(reset_ISR, error_ISR, ack_ISR)</b> 2) Initialize all used units except reset, error and ack units (they are already initialized in <b>init_ExtPack</b>()) with</p><ul>
<li>unit number (<b>unit_UXX</b>)</li>
<li>unit type (<b>UART_Unit</b>, <b>GPIO_Unit</b> or <b>Timer_Unit</b>) and</li>
<li>your custom ISR (of type <b>void (*func)(unit_t, char)</b>)</li>
</ul>
<p><b>NOTE:</b> You are able to define your amount of used units used by the ExtPack to minimize memory usage by adding the compiler flag: <span class="tt">-DUSED_UNITS=&lt;Amount&gt;</span> <br  />
 <b>NOTE:</b> You are able to set the size of the UART send ringbuffer by setting the compiler flag: <span class="tt">-DSEND_BUF_LEN=&lt;Amount commands&gt;</span> <br  />
 The default value depends on the used microcontroller. <br  />
 You are also able to deactivate the whole ring buffer by setting the size to 0. This will reduce the used memory for the library.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md42"></a>
Further documentation</h2>
<p>See the Doxygen documentation. <br  />
 Use <span class="tt">make docs</span> to create it. <br  />
 Then open <span class="tt">docs/html/index.html</span> in a browser. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
</div><!-- doc-content -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on <span class="timestamp"></span> for Lib_UART_Extension_Pack by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
